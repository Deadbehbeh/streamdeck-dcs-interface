<!DOCTYPE html>
<html>
  <head>
    <title>Property Inspector</title>
    <meta charset="utf-8" />
  </head>

  <style>
    .div {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 80px;
    }
    .btn {
      font: inherit;
      padding: 1rem 1.5rem;
      cursor: pointer;
      border-radius: 4px;
      background-color: #969696;
      color: white;
      border: 0px solid #3a3a3a;
      margin: 0 1rem;
    }

    .btn:hover {
      background-color: #7e7e7e;
    }

    .text {
      margin: 0;
      color: rgb(226, 226, 226);
    }
  </style>

  <body>
    <script>
      // This callback function is called by the Streamdeck application populating socketSettings to use.
      function connectElgatoStreamDeckSocket(
        inPort,
        inPluginUUID,
        inRegisterEvent,
        inInfo
      ) {
        // Store settings to the window object, so the Config Window when opened can access it.
        window.socketSettings = {
          port: inPort,
          propertyInspectorUUID: inPluginUUID,
          registerEvent: inRegisterEvent,
          info: inInfo,
        };
        console.log("Received settings:", socketSettings);
        document.getElementById("port").innerHTML = "Port: " + inPort;
        document.getElementById("uuid").innerHTML = "UUID: " + inPluginUUID;
      }

      function handleButtonPress() {
        // Only open if socketSettings have been populated.
        if (window.socketSettings) {
          // Only open window if there is not one already open.
          if (!window.configWindow || window.configWindow.closed) {
            window.configWindow = window.open(
              "../settingsUI/index.html",
              "Button Configuration"
            );
          }
        }
      }
    </script>
    <div class="div">
      <button
        class="btn"
        id="external_config_window_button"
        onclick="handleButtonPress()"
      >
        Configure
      </button>
    </div>
    <p class="text" id="port"></p>
    <p class="text" id="uuid"></p>
  </body>
</html>
